migrate create -ext sql -dir db/migration -seq init_schema
migrate -path db/migration -database "postgresql://root:secret@localhost:5432/simple_bank?sslmode=disable" -verbose up

go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest

sqlc version
sqlc help
sqlc init // generise yaml file u root-u projekta
sqlc generate

 go test -v -cover ./...

 go test -timeout 30s -run ^TestTransferTx$ -v

 mkdir -p .github/workflows

 go get github.com/spf13/viper

 go install github.com/golang/mock/mockgen@v1.6.0

 mockgen -package mockdb -destination db/mock/store.go github.com/tijanadmi/simplebank/db/sqlc Store

 /***** pokrecemo izmene na bazi sa novom migracijom ***/
 migrate create -ext sql -dir db/migration -seq add_users
 make migrateup  // dobijamo gresku zbog toga sto imamo podatke u tabeli account a dizemo constraint i forein key
make migratedown // dobijamo gresku zbog diry version jer nam prethodna migracija nije prosla, zato rucno u bazi u tabeli schema_migration promenimo kolonu dirty na false
 make migratedown // sada prolazi brisanje svih podataka iz baze
  make migrateup // prolazi

  make migratedown1 // brisemo promene u bazi koje su kreirane sa migrate verzije 1
  make migrateup1

make sqlc

make test // ne prolaze mock testovi zato sto smo dobili jos 2 nova metoda Querie interface-account
//make mock // da regenerisemo kod za mock Store
mockgen -package mockdb -destination db/mock/store.go github.com/tijanadmi/simplebank/db/sqlc Store
make test // sada prolazi


go get github.com/google/uuid

go get -u github.com/o1egl/paseto

/**** Rad sa sesijom ***/
migrate create -ext sql -dir db/migration -seq add_sessions
make migrateup
make sqlc

/*** DB dokumentacija ***/
node -v
npm -v
npm install -g dbdocs
/*** posto je node zastareo morala sam da instaliram ponovo novu verziju ***/
choco install nodejs-lts -y

dbdocs /*** vraca spisak komandi ako je dobro instaliran ***/
dbdocs login /*** unesemo 1 i email i nakon dobijanja mejla OTP kod***/
dbdocs build doc/db.dbml /*** kreira se dokumentacija **/
dbdocs password --set secret --project simple_bank /*** postavi se password=secret ***/

/*** instalacija dbml ***/
https://dbml.dbdiagram.io/cli
npm install -g @dbml/cli //instalira se dbml
dbml2sql --help
dbml2sql --postgres -o doc/schema.sql doc/db.dbml //generise se db.dbml na putanji koju smo specificirali
/*** ubacili smo komande u Makefile tako da kad god je potrebno regenerisati dbschema kucamo komadu: ***/
make db_docs
make db_schema